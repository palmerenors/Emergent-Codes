{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":94},"end":{"line":3,"column":50,"index":144}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.registerForPushNotificationsAsync = registerForPushNotificationsAsync;\n  exports.setupNotificationChannels = setupNotificationChannels;\n  var _expoNotifications = require(_dependencyMap[0], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  // Configure notification handler\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  async function registerForPushNotificationsAsync() {\n    try {\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      if (finalStatus !== 'granted') {\n        console.warn('Failed to get push token for push notification!');\n        return null;\n      }\n\n      // Get the Expo push token\n      const tokenData = await Notifications.getExpoPushTokenAsync();\n      const token = tokenData.data;\n\n      // Register token with backend\n      await _servicesApi.notificationAPI.registerToken({\n        token,\n        platform: Platform.default.OS\n      });\n      return token;\n    } catch (error) {\n      // Push notifications require development build, not available in Expo Go\n      if (error.message?.includes('projectId')) {\n        console.log('Push notifications require a development build. They are not available in Expo Go.');\n      } else {\n        console.error('Error registering for push notifications:', error);\n      }\n      return null;\n    }\n  }\n  async function setupNotificationChannels() {\n    if (Platform.default.OS === 'android') {\n      await Notifications.setNotificationChannelAsync('new_posts', {\n        name: 'New Posts',\n        importance: Notifications.AndroidImportance.HIGH,\n        vibrationPattern: [0, 250, 250, 250],\n        lightColor: '#FF0000'\n      });\n      await Notifications.setNotificationChannelAsync('milestones', {\n        name: 'Milestone Reminders',\n        importance: Notifications.AndroidImportance.DEFAULT,\n        vibrationPattern: [0, 200]\n      });\n      await Notifications.setNotificationChannelAsync('group_updates', {\n        name: 'Support Group Updates',\n        importance: Notifications.AndroidImportance.HIGH,\n        lightColor: '#0000FF'\n      });\n      await Notifications.setNotificationChannelAsync('premium_notifications', {\n        name: 'Premium Member Updates',\n        importance: Notifications.AndroidImportance.HIGH,\n        vibrationPattern: [0, 300, 200, 300],\n        lightColor: '#FFD700'\n      });\n    }\n  }\n});","lineCount":105,"map":[[27,2,14,0,"exports"],[27,9,14,0],[27,10,14,0,"registerForPushNotificationsAsync"],[27,43,14,0],[27,46,14,0,"registerForPushNotificationsAsync"],[27,79,14,0],[28,2,51,0,"exports"],[28,9,51,0],[28,10,51,0,"setupNotificationChannels"],[28,35,51,0],[28,38,51,0,"setupNotificationChannels"],[28,63,51,0],[29,2,1,0],[29,6,1,0,"_expoNotifications"],[29,24,1,0],[29,27,1,0,"require"],[29,34,1,0],[29,35,1,0,"_dependencyMap"],[29,49,1,0],[30,2,1,0],[30,6,1,0,"Notifications"],[30,19,1,0],[30,22,1,0,"_interopNamespace"],[30,39,1,0],[30,40,1,0,"_expoNotifications"],[30,58,1,0],[31,2,1,52],[31,6,1,52,"_reactNativeWebDistExportsPlatform"],[31,40,1,52],[31,43,1,52,"require"],[31,50,1,52],[31,51,1,52,"_dependencyMap"],[31,65,1,52],[32,2,1,52],[32,6,1,52,"Platform"],[32,14,1,52],[32,17,1,52,"_interopDefault"],[32,32,1,52],[32,33,1,52,"_reactNativeWebDistExportsPlatform"],[32,67,1,52],[33,2,3,0],[33,6,3,0,"_servicesApi"],[33,18,3,0],[33,21,3,0,"require"],[33,28,3,0],[33,29,3,0,"_dependencyMap"],[33,43,3,0],[34,2,5,0],[35,2,6,0,"Notifications"],[35,15,6,13],[35,16,6,14,"setNotificationHandler"],[35,38,6,36],[35,39,6,37],[36,4,7,2,"handleNotification"],[36,22,7,20],[36,24,7,22],[36,30,7,22,"handleNotification"],[36,31,7,22],[36,37,7,35],[37,6,8,4,"shouldShowAlert"],[37,21,8,19],[37,23,8,21],[37,27,8,25],[38,6,9,4,"shouldPlaySound"],[38,21,9,19],[38,23,9,21],[38,27,9,25],[39,6,10,4,"shouldSetBadge"],[39,20,10,18],[39,22,10,20],[40,4,11,2],[40,5,11,3],[41,2,12,0],[41,3,12,1],[41,4,12,2],[42,2,14,7],[42,17,14,22,"registerForPushNotificationsAsync"],[42,50,14,55,"registerForPushNotificationsAsync"],[42,51,14,55],[42,53,14,58],[43,4,15,2],[43,8,15,6],[44,6,16,4],[44,12,16,10],[45,8,16,12,"status"],[45,14,16,18],[45,16,16,20,"existingStatus"],[46,6,16,35],[46,7,16,36],[46,10,16,39],[46,16,16,45,"Notifications"],[46,29,16,58],[46,30,16,59,"getPermissionsAsync"],[46,49,16,78],[46,50,16,79],[46,51,16,80],[47,6,17,4],[47,10,17,8,"finalStatus"],[47,21,17,19],[47,24,17,22,"existingStatus"],[47,38,17,36],[48,6,19,4],[48,10,19,8,"existingStatus"],[48,24,19,22],[48,29,19,27],[48,38,19,36],[48,40,19,38],[49,8,20,6],[49,14,20,12],[50,10,20,14,"status"],[51,8,20,21],[51,9,20,22],[51,12,20,25],[51,18,20,31,"Notifications"],[51,31,20,44],[51,32,20,45,"requestPermissionsAsync"],[51,55,20,68],[51,56,20,69],[51,57,20,70],[52,8,21,6,"finalStatus"],[52,19,21,17],[52,22,21,20,"status"],[52,28,21,26],[53,6,22,4],[54,6,24,4],[54,10,24,8,"finalStatus"],[54,21,24,19],[54,26,24,24],[54,35,24,33],[54,37,24,35],[55,8,25,6,"console"],[55,15,25,13],[55,16,25,14,"warn"],[55,20,25,18],[55,21,25,19],[55,70,25,68],[55,71,25,69],[56,8,26,6],[56,15,26,13],[56,19,26,17],[57,6,27,4],[59,6,29,4],[60,6,30,4],[60,12,30,10,"tokenData"],[60,21,30,19],[60,24,30,22],[60,30,30,28,"Notifications"],[60,43,30,41],[60,44,30,42,"getExpoPushTokenAsync"],[60,65,30,63],[60,66,30,64],[60,67,30,65],[61,6,31,4],[61,12,31,10,"token"],[61,17,31,15],[61,20,31,18,"tokenData"],[61,29,31,27],[61,30,31,28,"data"],[61,34,31,32],[63,6,33,4],[64,6,34,4],[64,12,34,10,"notificationAPI"],[64,24,34,25],[64,25,34,25,"notificationAPI"],[64,40,34,25],[64,41,34,26,"registerToken"],[64,54,34,39],[64,55,34,40],[65,8,35,6,"token"],[65,13,35,11],[66,8,36,6,"platform"],[66,16,36,14],[66,18,36,16,"Platform"],[66,26,36,24],[66,27,36,24,"default"],[66,34,36,24],[66,35,36,25,"OS"],[67,6,37,4],[67,7,37,5],[67,8,37,6],[68,6,39,4],[68,13,39,11,"token"],[68,18,39,16],[69,4,40,2],[69,5,40,3],[69,6,40,4],[69,13,40,11,"error"],[69,18,40,21],[69,20,40,23],[70,6,41,4],[71,6,42,4],[71,10,42,8,"error"],[71,15,42,13],[71,16,42,14,"message"],[71,23,42,21],[71,25,42,23,"includes"],[71,33,42,31],[71,34,42,32],[71,45,42,43],[71,46,42,44],[71,48,42,46],[72,8,43,6,"console"],[72,15,43,13],[72,16,43,14,"log"],[72,19,43,17],[72,20,43,18],[72,104,43,102],[72,105,43,103],[73,6,44,4],[73,7,44,5],[73,13,44,11],[74,8,45,6,"console"],[74,15,45,13],[74,16,45,14,"error"],[74,21,45,19],[74,22,45,20],[74,65,45,63],[74,67,45,65,"error"],[74,72,45,70],[74,73,45,71],[75,6,46,4],[76,6,47,4],[76,13,47,11],[76,17,47,15],[77,4,48,2],[78,2,49,0],[79,2,51,7],[79,17,51,22,"setupNotificationChannels"],[79,42,51,47,"setupNotificationChannels"],[79,43,51,47],[79,45,51,50],[80,4,52,2],[80,8,52,6,"Platform"],[80,16,52,14],[80,17,52,14,"default"],[80,24,52,14],[80,25,52,15,"OS"],[80,27,52,17],[80,32,52,22],[80,41,52,31],[80,43,52,33],[81,6,53,4],[81,12,53,10,"Notifications"],[81,25,53,23],[81,26,53,24,"setNotificationChannelAsync"],[81,53,53,51],[81,54,53,52],[81,65,53,63],[81,67,53,65],[82,8,54,6,"name"],[82,12,54,10],[82,14,54,12],[82,25,54,23],[83,8,55,6,"importance"],[83,18,55,16],[83,20,55,18,"Notifications"],[83,33,55,31],[83,34,55,32,"AndroidImportance"],[83,51,55,49],[83,52,55,50,"HIGH"],[83,56,55,54],[84,8,56,6,"vibrationPattern"],[84,24,56,22],[84,26,56,24],[84,27,56,25],[84,28,56,26],[84,30,56,28],[84,33,56,31],[84,35,56,33],[84,38,56,36],[84,40,56,38],[84,43,56,41],[84,44,56,42],[85,8,57,6,"lightColor"],[85,18,57,16],[85,20,57,18],[86,6,58,4],[86,7,58,5],[86,8,58,6],[87,6,60,4],[87,12,60,10,"Notifications"],[87,25,60,23],[87,26,60,24,"setNotificationChannelAsync"],[87,53,60,51],[87,54,60,52],[87,66,60,64],[87,68,60,66],[88,8,61,6,"name"],[88,12,61,10],[88,14,61,12],[88,35,61,33],[89,8,62,6,"importance"],[89,18,62,16],[89,20,62,18,"Notifications"],[89,33,62,31],[89,34,62,32,"AndroidImportance"],[89,51,62,49],[89,52,62,50,"DEFAULT"],[89,59,62,57],[90,8,63,6,"vibrationPattern"],[90,24,63,22],[90,26,63,24],[90,27,63,25],[90,28,63,26],[90,30,63,28],[90,33,63,31],[91,6,64,4],[91,7,64,5],[91,8,64,6],[92,6,66,4],[92,12,66,10,"Notifications"],[92,25,66,23],[92,26,66,24,"setNotificationChannelAsync"],[92,53,66,51],[92,54,66,52],[92,69,66,67],[92,71,66,69],[93,8,67,6,"name"],[93,12,67,10],[93,14,67,12],[93,37,67,35],[94,8,68,6,"importance"],[94,18,68,16],[94,20,68,18,"Notifications"],[94,33,68,31],[94,34,68,32,"AndroidImportance"],[94,51,68,49],[94,52,68,50,"HIGH"],[94,56,68,54],[95,8,69,6,"lightColor"],[95,18,69,16],[95,20,69,18],[96,6,70,4],[96,7,70,5],[96,8,70,6],[97,6,72,4],[97,12,72,10,"Notifications"],[97,25,72,23],[97,26,72,24,"setNotificationChannelAsync"],[97,53,72,51],[97,54,72,52],[97,77,72,75],[97,79,72,77],[98,8,73,6,"name"],[98,12,73,10],[98,14,73,12],[98,38,73,36],[99,8,74,6,"importance"],[99,18,74,16],[99,20,74,18,"Notifications"],[99,33,74,31],[99,34,74,32,"AndroidImportance"],[99,51,74,49],[99,52,74,50,"HIGH"],[99,56,74,54],[100,8,75,6,"vibrationPattern"],[100,24,75,22],[100,26,75,24],[100,27,75,25],[100,28,75,26],[100,30,75,28],[100,33,75,31],[100,35,75,33],[100,38,75,36],[100,40,75,38],[100,43,75,41],[100,44,75,42],[101,8,76,6,"lightColor"],[101,18,76,16],[101,20,76,18],[102,6,77,4],[102,7,77,5],[102,8,77,6],[103,4,78,2],[104,2,79,0],[105,0,79,1],[105,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","registerForPushNotificationsAsync","setupNotificationChannels"],"mappings":"AAA;sBCM;IDI;OEG;CFmC;OGE;CH4B"},"hasCjsExports":false},"type":"js/module"}]}